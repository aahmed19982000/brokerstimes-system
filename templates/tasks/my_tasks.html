<<<<<<< HEAD
{% extends 'base.html' %}
{% load static %}

{% block title %}๐ ููุงูู{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/my_tasks.css' %}">
{% endblock %}

{% block content %}
<h2 class="page-title">๐ ููุงูู</h2>

{# โ ุฑุณุงุฆู ุงูุชูุจูู ูู backend #}
{% if messages %}
  <div class="messages">
    {% for message in messages %}
      <div class="alert">{{ message }}</div>
    {% endfor %}
  </div>
{% endif %}

{# โ ุฅุดุนุงุฑุงุช ุงููุณุชุฎุฏู #}
{% if notifications %}
  <div class="notifications-box">
    <h4 class="notifications-title">๐ ุฅุดุนุงุฑุงุช ุฌุฏูุฏุฉ:</h4>
    {% for notify in notifications %}
      <div class="notification-item {% if not notify.is_read %}unread{% endif %}" id="note-{{ notify.id }}">
        <p class="notification-text">
          <a href="{{ notify.link }}" target="_blank">{{ notify.message }}</a>
        </p>
        <div class="notification-actions">
          {% if not notify.is_read %}
            <button onclick="markAsRead({{ notify.id }})">โ ุชูุช ุงููุฑุงุกุฉ</button>
          {% endif %}
          <button onclick="deleteNotification({{ notify.id }})">๐ ุญุฐู</button>
        </div>
      </div>
    {% endfor %}
  </div>
{% endif %}

{# โ ูููุฐุฌ ุงูููุงุชุฑ #}
<form method="get" class="task-filter-form" style="margin-bottom: 20px; display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
  <label>
    ุงูุญุงูุฉ:
    <select name="status">
      <option value="">-- ุงููู --</option>
      <option value="in_progress" {% if selected_status == "in_progress" %}selected{% endif %}>โณ ุฌุงุฑู</option>
      <option value="upload" {% if selected_status == "upload" %}selected{% endif %}>๐ค ุชู ุงูุฑูุน</option>
      <option value="publish" {% if selected_status == "publish" %}selected{% endif %}>๐ข ุชู ุงููุดุฑ</option>
      <option value="done" {% if selected_status == "done" %}selected{% endif %}>โ ููุชููุฉ</option>
    </select>
  </label>

  <label>
    ูููุน ุงููุดุฑ:
    <select name="site">
      <option value="">-- ุงููู --</option>
      {% for id, name in sites %}
        <option value="{{ id }}" {% if id|stringformat:"s" == selected_site %}selected{% endif %}>{{ name }}</option>
      {% endfor %}
    </select>
  </label>

  <button type="submit">๐ ุชุตููุฉ</button>
  <a href="{% url 'my_tasks' %}" class="reset-filter">๐ ุฅุนุงุฏุฉ ุชุนููู</a>
</form>

{# โ ุฌุฏูู ุงูููุงู #}
<table class="task-table">
  <thead>
    <tr>
      <th>ุนููุงู ุงูููุงู</th>
      <th>[ุงูููุน]</th>
      <th>ุงูุชูุงุตูู</th>
      <th>ุฑุงุจุท ุงูููุงู</th>
      <th>ูููุน ุงููุดุฑ</th>
      <th>ุชุงุฑูุฎ ุงููุดุฑ</th>
      <th>ุงูุญุงูุฉ</th>
      <th>ุนุฑุถ ุงููุฒูุฏ</th>
    </tr>
  </thead>
  <tbody>
    {% for task in tasks %}
      <tr>
        <td>{{ task.article_title }}</td>
        <td>{{ task.article_type_W_R_A_B }}</td>
        <td>{{ task.article_details }}</td>
        <td>
          <form method="post" action="{% url 'update_article_link' task.id %}">
            {% csrf_token %}
            <input type="url" name="article_link" value="{{ task.article_link }}" placeholder="ุฃุฏุฎู ุงูุฑุงุจุท" required>
            <button type="submit">๐พ ุญูุธ</button>
          </form>
        </td>
        <td>{{ task.publish_site }}</td>
        <td>{{ task.publish_date }}</td>
        <td>
          <form method="post" action="{% url 'update_task_status' task.id %}">
            {% csrf_token %}
            <select name="status" onchange="this.form.submit()">
              <option value="in_progress" {% if task.status == 'in_progress' %}selected{% endif %}>โณ ุฌุงุฑู ุงูุนูู</option>
              <option value="upload" {% if task.status == 'upload' %}selected{% endif %}>๐ค ุชู ุงูุฑูุน</option>
              <option value="publish" {% if task.status == 'publish' %}selected{% endif %}>๐ข ุชู ุงููุดุฑ</option>
              <option value="done" {% if task.status == 'done' %}selected{% endif %}>โ ููุชููุฉ</option>
            </select>
          </form>
        </td>
        <td>
          <a href="{% url 'task_details' task.id %}" target="_blank">๐๏ธ ุนุฑุถ</a>
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="8">ูุง ุชูุฌุฏ ููุงู ุญุงููุงู.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}

{% block extra_js %}
  <script src="{% static 'js/task_popup.js' %}"></script>
  <script src="{% static 'js/notifications.js' %}"></script>
{% endblock %}
=======
{% extends 'base.html' %}
{% load static %}

{% block title %}๐ ููุงูู{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/my_tasks.css' %}">
{% endblock %}

{% block content %}
<h2 class="page-title">๐ ููุงูู</h2>

{# โ ุฑุณุงุฆู ุงูุชูุจูู ูู backend #}
{% if messages %}
  <div class="messages">
    {% for message in messages %}
      <div class="alert">{{ message }}</div>
    {% endfor %}
  </div>
{% endif %}

{# โ ุฅุดุนุงุฑุงุช ุงููุณุชุฎุฏู #}
{% if notifications %}
  <div class="notifications-box">
    <h4 class="notifications-title">๐ ุฅุดุนุงุฑุงุช ุฌุฏูุฏุฉ:</h4>
    {% for notify in notifications %}
      <div class="notification-item {% if not notify.is_read %}unread{% endif %}" id="note-{{ notify.id }}">
        <p class="notification-text">
          <a href="{{ notify.link }}" target="_blank">{{ notify.message }}</a>
        </p>
        <div class="notification-actions">
          {% if not notify.is_read %}
            <button onclick="markAsRead({{ notify.id }})">โ ุชูุช ุงููุฑุงุกุฉ</button>
          {% endif %}
          <button onclick="deleteNotification({{ notify.id }})">๐ ุญุฐู</button>
        </div>
      </div>
    {% endfor %}
  </div>
{% endif %}

{# โ ูููุฐุฌ ุงูููุงุชุฑ #}
<form method="get" class="task-filter-form" style="margin-bottom: 20px; display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
  <label>
    ุงูุญุงูุฉ:
    <select name="status">
      <option value="">-- ุงููู --</option>
      <option value="in_progress" {% if selected_status == "in_progress" %}selected{% endif %}>โณ ุฌุงุฑู</option>
      <option value="upload" {% if selected_status == "upload" %}selected{% endif %}>๐ค ุชู ุงูุฑูุน</option>
      <option value="publish" {% if selected_status == "publish" %}selected{% endif %}>๐ข ุชู ุงููุดุฑ</option>
      <option value="done" {% if selected_status == "done" %}selected{% endif %}>โ ููุชููุฉ</option>
    </select>
  </label>

  <label>
    ูููุน ุงููุดุฑ:
    <select name="site">
      <option value="">-- ุงููู --</option>
      {% for id, name in sites %}
        <option value="{{ id }}" {% if id|stringformat:"s" == selected_site %}selected{% endif %}>{{ name }}</option>
      {% endfor %}
    </select>
  </label>

  <button type="submit">๐ ุชุตููุฉ</button>
  <a href="{% url 'my_tasks' %}" class="reset-filter">๐ ุฅุนุงุฏุฉ ุชุนููู</a>
</form>

{# โ ุฌุฏูู ุงูููุงู #}
<table class="task-table">
  <thead>
    <tr>
      <th>ุนููุงู ุงูููุงู</th>
      <th>[ุงูููุน]</th>
      <th>ุงูุชูุงุตูู</th>
      <th>ุฑุงุจุท ุงูููุงู</th>
      <th>ูููุน ุงููุดุฑ</th>
      <th>ุชุงุฑูุฎ ุงููุดุฑ</th>
      <th>ุงูุญุงูุฉ</th>
      <th>ุนุฑุถ ุงููุฒูุฏ</th>
    </tr>
  </thead>
  <tbody>
    {% for task in tasks %}
      <tr>
        <td>{{ task.article_title }}</td>
        <td>{{ task.article_type_W_R_A_B }}</td>
        <td>{{ task.article_details }}</td>
        <td>
          <form method="post" action="{% url 'update_article_link' task.id %}">
            {% csrf_token %}
            <input type="url" name="article_link" value="{{ task.article_link }}" placeholder="ุฃุฏุฎู ุงูุฑุงุจุท" required>
            <button type="submit">๐พ ุญูุธ</button>
          </form>
        </td>
        <td>{{ task.publish_site }}</td>
        <td>{{ task.publish_date }}</td>
        <td>
          <form method="post" action="{% url 'update_task_status' task.id %}">
            {% csrf_token %}
            <select name="status" onchange="this.form.submit()">
              <option value="in_progress" {% if task.status == 'in_progress' %}selected{% endif %}>โณ ุฌุงุฑู ุงูุนูู</option>
              <option value="upload" {% if task.status == 'upload' %}selected{% endif %}>๐ค ุชู ุงูุฑูุน</option>
              <option value="publish" {% if task.status == 'publish' %}selected{% endif %}>๐ข ุชู ุงููุดุฑ</option>
              <option value="done" {% if task.status == 'done' %}selected{% endif %}>โ ููุชููุฉ</option>
            </select>
          </form>
        </td>
        <td>
          <a href="{% url 'task_details' task.id %}" target="_blank">๐๏ธ ุนุฑุถ</a>
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="8">ูุง ุชูุฌุฏ ููุงู ุญุงููุงู.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}

{% block extra_js %}
  <script src="{% static 'js/task_popup.js' %}"></script>
  <script src="{% static 'js/notifications.js' %}"></script>
{% endblock %}
>>>>>>> d7023bb44d462afe13064eb16464741bb8208045
